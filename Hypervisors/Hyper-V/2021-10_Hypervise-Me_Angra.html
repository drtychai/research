<!doctype html>
<html lang="dev">
    <head>
        <meta charset="utf-8">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="mobile-web-app-capable" content="yes">
        
        
        <meta name="description" content="  # Hypervise Me!  &lt;br/&gt; &lt;i&gt;J. Angra&lt;/i&gt; &lt;br/&gt;&lt;br/&gt;&lt;br/&gt; &lt;br/&gt;&lt;br/&gt;&lt;br/&gt; &lt;table cellborder=&#34;1&#34; cells">
        
        <title>Hypervise Me! - HackMD</title>
        <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
        <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">
        
<script nonce="9396641a-6eba-4437-8d28-56413fc42bdf">
  window.domain = 'hackmd.io'
  window.urlpath = ''
  window.debug = false
  window.version = '1.3.0'
  window.brand = 'HackMD'

  

  window.GOOGLE_API_KEY = 'AIzaSyCjSrqWHhmWJnoI7JlD88XDSaBgiKbaenA'
  window.GOOGLE_CLIENT_ID = '911617723593-drikdibvvn63slfd6kbqigo8ql1no55s.apps.googleusercontent.com'
  window.DROPBOX_APP_KEY = 'rdoizrlnkuha23r'
  
  window.PLANTUML_SERVER = 'https://ptuml.hackmd.io'

  window.ASSET_URL = 'https://assets.hackmd.io'

  window.USER_CAN_CREATE_TEAM = true
  window.USER_CAN_DELETE_ACCOUNT = true
  window.USER_DELETE_ACCOUNT_VIA_EMAIL = true
  window.PAYMENT_ENABLED = true
  window.PAYMENT_PROMOTION_BANNER_ENABLED = 
  window.PERSONAL_PLAN_ENABLE = true
  window.GITHUB_SYNC_ENABLED = true
  window.GITLAB_SYNC_ENABLED = false
  window.GITLAB_SYNC_BASE_URL = ''
  window.VCS_SYNC_MODE = 'github'
  window.VCS_PROVIDER_NAME = 'GitHub'
  window.FREE_TEAM_NUM = 20
  window.FREE_TEAM_MEMBER_NUM = 3
  window.FREE_PUBLIC_TEAM_NUM = 10
  
  window.ALLOW_ANONYMOUS = true
  window.ALLOW_ANONYMOUS_EDIT = false
  window.PUBLIC_OVERVIEW = false
  window.INTERNAL_PUBLIC_OVERVIEW = false
  window.FULL_TEXT_SEARCH_ENABLE = false

  

  

  

  window.USE_CDN = false

  

  

  

  

  

  

  

  

  

  
</script>


        
<!-- Google Tag Manager -->
<script nonce="9396641a-6eba-4437-8d28-56413fc42bdf">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KLW9Z3');</script>
<!-- End Google Tag Manager -->


        <meta property="fb:app_id" content="1436904003272070">

<meta name="twitter:image:src" content="https://avatars.githubusercontent.com/u/3212079?s=400" />

<meta name="twitter:site" content="@hackmdio" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Hypervise Me! - HackMD" />

<meta name="twitter:description" content="  # Hypervise Me!  &lt;br/&gt; &lt;i&gt;J. Angra&lt;/i&gt; &lt;br/&gt;&lt;br/&gt;&lt;br/&gt; &lt;br/&gt;&lt;br/&gt;&lt;br/&gt; &lt;table cellborder=&#34;1&#34; cells" />


<meta property="og:image" content="https://avatars.githubusercontent.com/u/3212079?s=400" />

<meta property="og:site_name" content="HackMD" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Hypervise Me! - HackMD" />

<meta property="og:description" content="  # Hypervise Me!  &lt;br/&gt; &lt;i&gt;J. Angra&lt;/i&gt; &lt;br/&gt;&lt;br/&gt;&lt;br/&gt; &lt;br/&gt;&lt;br/&gt;&lt;br/&gt; &lt;table cellborder=&#34;1&#34; cells" />



        
        <link rel="stylesheet" href="https://assets.hackmd.io/build/reveal.js/css/reveal.css">
        <link rel="stylesheet" href='https://assets.hackmd.io/build/emojify.js/dist/css/basic/emojify.min.css'>
         <link href="https://assets.hackmd.io/build/font-vendor.808f75da673962c80518.css" rel="stylesheet"><link href="https://assets.hackmd.io/build/common-vendor.1233bc7a27f833ea4984.css" rel="stylesheet"><link href="https://assets.hackmd.io/build/slide-vendor.d0b8b6e51b1e6471fc35.css" rel="stylesheet"><link href="https://assets.hackmd.io/build/slide.22bf5fbd6473a70908d4.css" rel="stylesheet">
        

        <!-- style-loader will insert style before this div in development -->
        <!-- This prevents overwriting reveal.js theme css -->
        <meta id="style-tag-insertion">

        <!-- For reveal.js theme -->
        
        <link rel="stylesheet" href="https://assets.hackmd.io/build/reveal.js/css/theme/black.css" id="theme">
        
        <!-- For overwrite reveal.js -->
        <link rel="stylesheet" href="https://hackmd.io/build/slide.css">

        <!-- Printing and PDF exports -->
		<script nonce="9396641a-6eba-4437-8d28-56413fc42bdf">
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
            link.href = 'https://assets.hackmd.io/build/reveal.js/' + (window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css');
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
<![endif]-->

    </head>
    <body>
        <div class="container" data-hard-breaks="true">
            <div class="reveal">
                <div class="slides" style="display: none;">

# Hypervise Me!

&lt;br/&gt;
&lt;i&gt;J. Angra&lt;/i&gt;
&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;
&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;
&lt;table cellborder=&#34;1&#34; cellspacing=&#34;2&#34;&gt;
  &lt;tr&gt;&lt;td 
    align=&#34;center&#34;
    border=&#34;2&#34;
    style=&#34;font-size:24px&#34;&gt;Slides&lt;/td&gt;
  &lt;/tr&gt;
  
  &lt;tr&gt;&lt;td
    align=&#34;center&#34;
    border=&#34;2&#34;
    style=&#34;font-size:16px&#34;&gt;
      &lt;a href=&#34;https://hackmd.io/@bynx/rkedorfBF&#34;&gt;https://hackmd.io/@bynx/rkedorfBF&lt;/a&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;


---

## So... What&#39;s a _Hypervisor_?

&lt;font style=&#34;font-size:28px&#34;&gt;

&lt;i&gt;&lt;font color=&#34;lightblue&#34;&gt;Hypervisors&lt;/font&gt;&lt;/i&gt;, and their &lt;i&gt;Virtual Machine Monitors (VMMs)&lt;/i&gt;,&lt;br/&gt;create, manage, monitor, and allocate virtualized hardware to Guest kernels
&lt;/font&gt;

&lt;table style=&#34;width:100%;margin-bottom:-35px&#34; border=&#34;0&#34;&gt;
&lt;tr&gt;&lt;td&gt;
&lt;figure style=&#34;margin-left:-100px;font-size:18px&#34;&gt;
&lt;center&gt;

  &lt;!-- width=&#34;744pt&#34; height=&#34;303pt&#34; --&gt;
  &lt;svg width=&#34;544pt&#34; height=&#34;&#34; viewBox=&#34;0.00 0.00 744.00 302.80&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;
  &lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 298.8)&#34;&gt;
  &lt;g id=&#34;clust3&#34; class=&#34;cluster&#34;&gt;
  &lt;title&gt;cluster_vmm&lt;/title&gt;
  &lt;polygon fill=&#34;#add8e6&#34; stroke=&#34;#000000&#34; points=&#34;64,-80 64,-230.8 728,-230.8 728,-80 64,-80&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;396&#34; y=&#34;-88.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Hypervisor / VMM&lt;/text&gt;
  &lt;/g&gt;
  &lt;!-- guest_node --&gt;
  &lt;g id=&#34;node1&#34; class=&#34;node&#34;&gt;
  &lt;title&gt;guest_node&lt;/title&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;504,-294.8 292,-294.8 288,-290.8 288,-258.8 500,-258.8 504,-262.8 504,-294.8&#34;&gt;&lt;/polygon&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;500,-290.8 288,-290.8 &#34;&gt;&lt;/polyline&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;500,-290.8 500,-258.8 &#34;&gt;&lt;/polyline&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;500,-290.8 504,-294.8 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;396&#34; y=&#34;-272.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS&lt;/text&gt;
  &lt;/g&gt;
  &lt;!-- d_node --&gt;
  &lt;g id=&#34;node2&#34; class=&#34;node&#34;&gt;
  &lt;title&gt;d_node&lt;/title&gt;
  &lt;path fill=&#34;#ffc0cb&#34; stroke=&#34;#000000&#34; d=&#34;M264,-186.3C264,-186.3 528,-186.3 528,-186.3 534,-186.3 540,-192.3 540,-198.3 540,-198.3 540,-210.3 540,-210.3 540,-216.3 534,-222.3 528,-222.3 528,-222.3 264,-222.3 264,-222.3 258,-222.3 252,-216.3 252,-210.3 252,-210.3 252,-198.3 252,-198.3 252,-192.3 258,-186.3 264,-186.3&#34;&gt;&lt;/path&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;395.8184&#34; y=&#34;-200.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Dispatcher&lt;/text&gt;
  &lt;/g&gt;
  &lt;!-- guest_node-&gt;d_node --&gt;
  &lt;g id=&#34;edge1&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;guest_node-&gt;d_node&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M467.4287,-258.5052C477.4767,-249.8534 479.6134,-239.3759 473.8387,-229.9477&#34;&gt;&lt;/path&gt;
  &lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;476.3668,-227.5227 467.1273,-222.3378 471.1168,-232.1528 476.3668,-227.5227&#34;&gt;&lt;/polygon&gt;
  &lt;/g&gt;
  &lt;!-- d_node-&gt;guest_node --&gt;
  &lt;g id=&#34;edge6&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;d_node-&gt;guest_node&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M324.8727,-222.3378C314.6677,-230.9531 312.3741,-241.4226 317.9917,-250.8714&#34;&gt;&lt;/path&gt;
  &lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;315.3914,-253.2155 324.5713,-258.5052 320.6938,-248.6454 315.3914,-253.2155&#34;&gt;&lt;/polygon&gt;
  &lt;/g&gt;
  &lt;!-- a_node --&gt;
  &lt;g id=&#34;node3&#34; class=&#34;node&#34;&gt;
  &lt;title&gt;a_node&lt;/title&gt;
  &lt;path fill=&#34;#ffc0cb&#34; stroke=&#34;#000000&#34; d=&#34;M84,-113.3C84,-113.3 276,-113.3 276,-113.3 282,-113.3 288,-119.3 288,-125.3 288,-125.3 288,-137.3 288,-137.3 288,-143.3 282,-149.3 276,-149.3 276,-149.3 84,-149.3 84,-149.3 78,-149.3 72,-143.3 72,-137.3 72,-137.3 72,-125.3 72,-125.3 72,-119.3 78,-113.3 84,-113.3&#34;&gt;&lt;/path&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;179.9341&#34; y=&#34;-127.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Allocator&lt;/text&gt;
  &lt;/g&gt;
  &lt;!-- d_node-&gt;a_node --&gt;
  &lt;g id=&#34;edge2&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;d_node-&gt;a_node&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M271.618,-186.2551C231.2404,-176.5157 193.8348,-164.3975 171.5933,-154.0207&#34;&gt;&lt;/path&gt;
  &lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;172.9855,-150.8022 162.4851,-149.3904 169.8132,-157.0421 172.9855,-150.8022&#34;&gt;&lt;/polygon&gt;
  &lt;/g&gt;
  &lt;!-- i_node --&gt;
  &lt;g id=&#34;node4&#34; class=&#34;node&#34;&gt;
  &lt;title&gt;i_node&lt;/title&gt;
  &lt;path fill=&#34;#ffc0cb&#34; stroke=&#34;#000000&#34; d=&#34;M516,-113.3C516,-113.3 708,-113.3 708,-113.3 714,-113.3 720,-119.3 720,-125.3 720,-125.3 720,-137.3 720,-137.3 720,-143.3 714,-149.3 708,-149.3 708,-149.3 516,-149.3 516,-149.3 510,-149.3 504,-143.3 504,-137.3 504,-137.3 504,-125.3 504,-125.3 504,-119.3 510,-113.3 516,-113.3&#34;&gt;&lt;/path&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;611.9499&#34; y=&#34;-127.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Interpreter Routine&lt;/text&gt;
  &lt;/g&gt;
  &lt;!-- d_node-&gt;i_node --&gt;
  &lt;g id=&#34;edge3&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;d_node-&gt;i_node&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M378.4046,-186.2551C399.2358,-174.499 444.9098,-159.2768 493.9838,-147.8351&#34;&gt;&lt;/path&gt;
  &lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;494.86,-151.2254 503.8376,-145.5993 493.311,-144.3989 494.86,-151.2254&#34;&gt;&lt;/polygon&gt;
  &lt;/g&gt;
  &lt;!-- a_node-&gt;d_node --&gt;
  &lt;g id=&#34;edge4&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;a_node-&gt;d_node&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M288.1624,-145.5993C334.711,-155.8686 379.5121,-169.9186 404.6611,-181.6982&#34;&gt;&lt;/path&gt;
  &lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;403.097,-184.8294 413.5954,-186.2551 406.2775,-178.5936 403.097,-184.8294&#34;&gt;&lt;/polygon&gt;
  &lt;/g&gt;
  &lt;!-- physical_node --&gt;
  &lt;g id=&#34;node5&#34; class=&#34;node&#34;&gt;
  &lt;title&gt;physical_node&lt;/title&gt;
  &lt;polygon fill=&#34;#c0c0c0&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;360,-72 4,-72 0,-68 0,-36 356,-36 360,-40 360,-72&#34;&gt;&lt;/polygon&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;356,-68 0,-68 &#34;&gt;&lt;/polyline&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;356,-68 356,-36 &#34;&gt;&lt;/polyline&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;356,-68 360,-72 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;180&#34; y=&#34;-49.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Physical (Bare-Metal) Hardware&lt;/text&gt;
  &lt;/g&gt;
  &lt;!-- a_node-&gt;physical_node --&gt;
  &lt;g id=&#34;edge8&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;a_node-&gt;physical_node&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M109.921,-112.981C98.1618,-103.0654 95.8989,-90.6541 103.1323,-79.7781&#34;&gt;&lt;/path&gt;
  &lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;105.9092,-81.9279 110.0776,-72.1875 100.7448,-77.2025 105.9092,-81.9279&#34;&gt;&lt;/polygon&gt;
  &lt;/g&gt;
  &lt;!-- i_node-&gt;d_node --&gt;
  &lt;g id=&#34;edge5&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;i_node-&gt;d_node&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M629.5149,-149.3904C610.9566,-159.8395 572.8236,-173.0155 530.1385,-183.8413&#34;&gt;&lt;/path&gt;
  &lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;529.2487,-180.4558 520.382,-186.2551 530.9299,-187.251 529.2487,-180.4558&#34;&gt;&lt;/polygon&gt;
  &lt;/g&gt;
  &lt;!-- physical_node-&gt;a_node --&gt;
  &lt;g id=&#34;edge7&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;physical_node-&gt;a_node&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M249.9224,-72.1875C261.7656,-82.0809 264.1125,-94.4879 256.9632,-105.3775&#34;&gt;&lt;/path&gt;
  &lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;254.1962,-103.2188 250.079,-112.981 259.3853,-107.917 254.1962,-103.2188&#34;&gt;&lt;/polygon&gt;
  &lt;/g&gt;
  &lt;/g&gt;
  &lt;/svg&gt;

$$\def\sc#1{\dosc#1\csod} \def\dosc#1#2\csod{{\rm #1{\small #2}}}$$
&lt;figcaption style=&#34;margin-top:-80px&#34;&gt;

$$
\quad\quad \sc{Abstracted\ Hypervisor\ /\ VMM\ Model}
$$

&lt;/figcaption&gt;
&lt;/center&gt;
&lt;/figure&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;font style=&#34;font-size:28px&#34;&gt;

The term &lt;font color=&#34;lightblue&#34;&gt;&lt;i&gt;hypervisor&lt;/i&gt;&lt;/font&gt; denotes a program that controls &lt;font color=&#34;orchid&#34;&gt;&lt;b&gt;supervisors&lt;/b&gt;&lt;/font&gt;&lt;br/&gt;i.e., they supervise the supervisors (OS Kernels)
&lt;/font&gt;


---

## Why does this matter to us? 
&lt;b&gt;&lt;i&gt;&lt;font style=&#34;font-size:24pt&#34;&gt;( Perspective of a Malicious Actor )&lt;/font&gt;
&lt;/i&gt;&lt;/b&gt;

To summize $\dots$ &lt;font color=&#34;lightblue&#34;&gt;hypervisors&lt;/font&gt; provide:

- Virtualization
- Emulation
- Portability
- (Secure?) Isolation

&lt;br/&gt;&lt;br/&gt;
&lt;br/&gt;&lt;br/&gt;
&lt;br/&gt;

---

## Why does this matter to us?
&lt;b&gt;&lt;i&gt;&lt;font style=&#34;font-size:24pt&#34;&gt;( Perspective of a Malicious Actor )&lt;/font&gt;&lt;/i&gt;&lt;/b&gt;

To summize $\dots$ &lt;font color=&#34;lightblue&#34;&gt;hypervisors&lt;/font&gt; provide:

- Virtualization
- Emulation
- Portability
- (Secure?) Isolation

&lt;b style=&#34;font-size:72px;color:red&#34;&gt;$\Rightarrow$ Cloud&lt;/b&gt;
&lt;br/&gt;
&lt;br/&gt;

---

## Why does this matter to us?
&lt;b&gt;&lt;i&gt;&lt;font style=&#34;font-size:24pt&#34;&gt;( Perspective of a Malicious Actor )&lt;/font&gt;&lt;/i&gt;&lt;/b&gt;

$$
\def\sc#1{\dosc#1\csod} \def\dosc#1#2\csod{{\rm #1{\small #2}}}
$$

Exploitation of a &lt;font color=&#34;red&#34;&gt;cloud&lt;/font&gt; &lt;font color=&#34;lightblue&#34;&gt;hypervisor&lt;/font&gt; provides 
$\sc{Ring}$ - $-1$ access to the underlying Host
&lt;br/&gt;
&lt;i style=&#34;font-size:28px&#34;&gt;&lt;b&gt;Root Mode&lt;/b&gt;$\dots$ on an [AWS/Azure/GCP] bare-metal host ;)&lt;br/&gt;. . . Think of the possibilities . . .&lt;/i&gt;
&lt;br/&gt;&lt;br/&gt;
&lt;br/&gt;&lt;br/&gt;

---

&lt;table style=&#34;margin-top:-100px&#34;&gt;&lt;/table&gt;

$$
\def\sc#1{\dosc#1\csod} \def\dosc#1#2\csod{{\rm #1{\small #2}}}
$$


## $\sc{Ring}$ - $-1$? Wat?

&lt;font style=&#34;font-size:36px&#34;&gt;&lt;br/&gt;

Modern x86 Intel and AMD CPUs support &lt;i&gt;x86 virtualization&lt;/i&gt;

&lt;i&gt;

$\Rightarrow$ This provides a Guest OS access to HW in $\sc{Ring}$ - $0$

&lt;/i&gt;

&lt;br/&gt;

How? Both Intel VT-x and AMD SVM insert a higher privilege level, $\sc{Ring}$ - $-1$, by adding new machine code instructions to the host kernel 

&lt;i&gt;

$\Rightarrow$ Guest OS runs at intended privilege $\sc{(Ring}$ - $0)$
$\Rightarrow$ VMM runs in the **&#34;Root Mode&#34;** ring $\sc{(Ring}$ - $-1)$

&lt;/i&gt;
&lt;/font&gt;

&lt;br/&gt;

---

## Flavours of Hypervisors

$$\def\sc#1{\dosc#1\csod} \def\dosc#1#2\csod{{\rm #1{\small #2}}}$$

&lt;table 
  cellspacing=&#34;0&#34; cellborder=&#34;0&#34; border=&#34;0&#34;
  style=&#34;align:left;margin-left:-100px;margin-top:-85px;height:100%&#34;&gt;
&lt;tr&gt;

&lt;td style=&#34;font-size:18px&#34;&gt;
  &lt;figure&gt;
  &lt;center&gt;
  &lt;figcaption style=&#34;font-size:12px;margin:-35px&#34;&gt;
  
  $$
  \large\textbf{Type-1} \\
  [\ \sc{NATIVE,\ BARE-METAL\ \ HYPERVISOR}\ ]\\
  $$
  &lt;/figcaption&gt;
  
  ---
  &lt;!--width=&#34;371pt&#34; height=&#34;169pt&#34;--&gt;
  &lt;svg width=&#34;265pt&#34; height=&#34;&#34; viewBox=&#34;0.00 0.00 371.00 168.80&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;
  &lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 164.8)&#34;&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; points=&#34;11.5,-127.8 11.5,-153.8 94.5,-153.8 94.5,-127.8 11.5,-127.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-129.3 13,-152.3 93,-152.3 93,-129.3 13,-129.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;20.7272&#34; y=&#34;-136.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 1&lt;/text&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;97.5,-127.8 97.5,-153.8 180.5,-153.8 180.5,-127.8 97.5,-127.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;99,-129.3 99,-152.3 179,-152.3 179,-129.3 99,-129.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;106.7272&#34; y=&#34;-136.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 2&lt;/text&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;183.5,-127.8 183.5,-153.8 266.5,-153.8 266.5,-127.8 183.5,-127.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;185,-129.3 185,-152.3 265,-152.3 265,-129.3 185,-129.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;192.7272&#34; y=&#34;-136.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 3&lt;/text&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;269.5,-127.8 269.5,-153.8 352.5,-153.8 352.5,-127.8 269.5,-127.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;271,-129.3 271,-152.3 351,-152.3 351,-129.3 271,-129.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;278.7272&#34; y=&#34;-136.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 4&lt;/text&gt;
  &lt;polygon fill=&#34;#add8e6&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;11.5,-74.8 11.5,-124.8 352.5,-124.8 352.5,-74.8 11.5,-74.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-76.3 13,-123.3 351,-123.3 351,-76.3 13,-76.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;127.568&#34; y=&#34;-95.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Hypervisor / VMM&lt;/text&gt;
  &lt;polygon fill=&#34;#c0c0c0&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;11.5,-31.8 11.5,-71.8 352.5,-71.8 352.5,-31.8 11.5,-31.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-33.3 13,-70.3 351,-70.3 351,-33.3 13,-33.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;105.0287&#34; y=&#34;-47.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Physical (Bare-Metal) Host&lt;/text&gt;
  &lt;/g&gt;
  &lt;/g&gt;
  &lt;/svg&gt;
  &lt;/center&gt;
  &lt;/figure&gt;
 
**$\rightarrow$** $[\dots]$ securely multiplexes the processor between Guests
**$\rightarrow$** $[\dots]$ runs in privileged mode and enforces protection for memory and IO ports
**$\rightarrow$** $[\dots]$ allocates$/$manages resources and implements the virtualization layer

&lt;br/&gt;

---
_e.g.,_ ESXi, QEMU, KVM, Xen Server
&lt;br/&gt;

&lt;/td&gt;

&lt;td style=&#34;font-size:18px&#34;&gt;
  &lt;figure&gt;
  &lt;center&gt;
  &lt;figcaption style=&#34;font-size:12px;margin:-35px&#34;&gt;
  
  $$
  \large\textbf{Type-2} \\
  [\ \sc{HOSTED\ HYPERVISOR}\ ]\\
  $$
  
  &lt;/figcaption&gt;
  
  ---
  &lt;!--width=&#34;371pt&#34; height=&#34;187pt&#34;--&gt;
  &lt;svg width=&#34;240pt&#34; height=&#34;&#34; viewBox=&#34;0.00 0.00 371.00 186.80&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;
  &lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 182.8)&#34;&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; points=&#34;11.5,-145.8 11.5,-171.8 94.5,-171.8 94.5,-145.8 11.5,-145.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-147.3 13,-170.3 93,-170.3 93,-147.3 13,-147.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;20.7272&#34; y=&#34;-154.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 1&lt;/text&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;97.5,-145.8 97.5,-171.8 180.5,-171.8 180.5,-145.8 97.5,-145.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;99,-147.3 99,-170.3 179,-170.3 179,-147.3 99,-147.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;106.7272&#34; y=&#34;-154.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 2&lt;/text&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;183.5,-145.8 183.5,-171.8 266.5,-171.8 266.5,-145.8 183.5,-145.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;185,-147.3 185,-170.3 265,-170.3 265,-147.3 185,-147.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;192.7272&#34; y=&#34;-154.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 3&lt;/text&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;269.5,-145.8 269.5,-171.8 352.5,-171.8 352.5,-145.8 269.5,-145.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;271,-147.3 271,-170.3 351,-170.3 351,-147.3 271,-147.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;278.7272&#34; y=&#34;-154.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 4&lt;/text&gt;
  &lt;polygon fill=&#34;#add8e6&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;11.5,-102.8 11.5,-142.8 352.5,-142.8 352.5,-102.8 11.5,-102.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-104.3 13,-141.3 351,-141.3 351,-104.3 13,-104.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;127.568&#34; y=&#34;-118.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Hypervisor / VMM&lt;/text&gt;
  &lt;polygon fill=&#34;#da70d6&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;11.5,-64.8 11.5,-99.8 352.5,-99.8 352.5,-64.8 11.5,-64.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-66.3 13,-98.3 351,-98.3 351,-66.3 13,-66.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;158.0845&#34; y=&#34;-78.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Host OS&lt;/text&gt;
  &lt;polygon fill=&#34;#c0c0c0&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;11.5,-31.8 11.5,-61.8 352.5,-61.8 352.5,-31.8 11.5,-31.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-33.3 13,-60.3 351,-60.3 351,-33.3 13,-33.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;105.0287&#34; y=&#34;-42.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Physical (Bare-Metal) Host&lt;/text&gt;
  &lt;/g&gt;
  &lt;/g&gt;
  &lt;/svg&gt;
  &lt;/center&gt;
  &lt;/figure&gt;


**$\rightarrow$** $[\dots]$ are installed and operate via OS-level virtualization
**$\rightarrow$** $[\dots]$ act and operate as any other userspace process
**$\rightarrow$** $[\dots]$ leverage the OS kernel to enforce (userspace) isolation of Guest resources (CPU/MEM/etc.)

&lt;br/&gt;

---
_e.g.,_ Virtualbox, VMWare Fusion, QEMU, KVM, Docker, LXC, chroot
&lt;/td&gt;


&lt;td style=&#34;font-size:18px&#34;&gt;
  &lt;figure&gt;&lt;center&gt;
  &lt;figcaption style=&#34;font-size:12px;margin:-35px&#34; &gt;
 
  $$
  \large\textbf{Type-X} \\
  [\ \sc{HYBRID\ HYPERVISOR}\ ]\\
  $$
 
  &lt;/figcaption&gt; 
  
  ---
  &lt;!--width=&#34;446pt&#34; height=&#34;149pt&#34;--&gt;
  &lt;svg width=&#34;356pt&#34; height=&#34;&#34; viewBox=&#34;0.00 0.00 446.00 148.80&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;
  &lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 144.8)&#34;&gt;
  &lt;polygon fill=&#34;#da70d6&#34; stroke=&#34;transparent&#34; points=&#34;11,-64.8 11,-133.8 83,-133.8 83,-64.8 11,-64.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;12.5,-66.3 12.5,-132.3 81.5,-132.3 81.5,-66.3 12.5,-66.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;23.0845&#34; y=&#34;-95.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Host OS&lt;/text&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;86,-107.8 86,-133.8 169,-133.8 169,-107.8 86,-107.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;87.5,-109.3 87.5,-132.3 167.5,-132.3 167.5,-109.3 87.5,-109.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;95.2272&#34; y=&#34;-116.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 1&lt;/text&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;172,-107.8 172,-133.8 255,-133.8 255,-107.8 172,-107.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;173.5,-109.3 173.5,-132.3 253.5,-132.3 253.5,-109.3 173.5,-109.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;181.2272&#34; y=&#34;-116.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 2&lt;/text&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;258,-107.8 258,-133.8 341,-133.8 341,-107.8 258,-107.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;259.5,-109.3 259.5,-132.3 339.5,-132.3 339.5,-109.3 259.5,-109.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;267.2272&#34; y=&#34;-116.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 3&lt;/text&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;344,-107.8 344,-133.8 427,-133.8 427,-107.8 344,-107.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;345.5,-109.3 345.5,-132.3 425.5,-132.3 425.5,-109.3 345.5,-109.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;353.2272&#34; y=&#34;-116.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS 4&lt;/text&gt;
  &lt;polygon fill=&#34;#add8e6&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;86,-64.8 86,-104.8 427,-104.8 427,-64.8 86,-64.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;87.5,-66.3 87.5,-103.3 425.5,-103.3 425.5,-66.3 87.5,-66.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;202.068&#34; y=&#34;-80.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Hypervisor / VMM&lt;/text&gt;
  &lt;polygon fill=&#34;#c0c0c0&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;11,-31.8 11,-61.8 427,-61.8 427,-31.8 11,-31.8&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;12.5,-33.3 12.5,-60.3 425.5,-60.3 425.5,-33.3 12.5,-33.3&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;142.0287&#34; y=&#34;-42.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Physical (Bare-Metal) Host&lt;/text&gt;
  &lt;/g&gt;
  &lt;/g&gt;
  &lt;/svg&gt;&lt;br/&gt;
  &lt;/center&gt;
  &lt;/figure&gt;
 

**$\rightarrow$** $[\dots]$ combines attributes of Type-1 and Type-2 
**$\rightarrow$** $[\dots]$ runs as a &#34;thin&#34; hypervisor managed by a service OS 
**$\rightarrow$** $[\dots]$ manager CPU and MEM directly
**$\rightarrow$** $[\dots]$ provide Guests access to (para-virtualized) I/O devices through a service OS

&lt;br/&gt;&lt;br/&gt;

---
&lt;center&gt;

_e.g.,_ Microsoft Hyper-V
&lt;/center&gt;
&lt;br/&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

---

# Microsoft Hyper-V


---

## Hyper-V: An Overview

- High-Level Architecture
- Where is it used? (_Local v. Azure_)
- Components / How it works

---

&lt;figure&gt;&lt;center&gt;
&lt;figcaption style=&#34;font-size:16pt;margin:-10px&#34;&gt;

$$\def\sc#1{\dosc#1\csod} \def\dosc#1#2\csod{{\rm #1{\small #2}}}$$

$$
\sc{HYPER-V}\\
\sc{ABSTRACTED\ ARCHITECTURE}
$$

&lt;/figcaption&gt;



&lt;!-- width=&#34;823pt&#34; height=&#34;295pt&#34;--&gt;
  &lt;svg width=&#34;423pt&#34; height=&#34;&#34; viewBox=&#34;0.00 0.00 823.00 295.00&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;
  &lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 291)&#34;&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-192 13,-278 224,-278 224,-192 13,-192&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#da70d6&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;16.5,-195.5 16.5,-274.5 220.5,-274.5 220.5,-195.5 16.5,-195.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;79.0263&#34; y=&#34;-231.8&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Root Partition&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;230,-192 230,-278 416,-278 416,-192 230,-192&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;233.5,-195.5 233.5,-274.5 412.5,-274.5 412.5,-195.5 233.5,-195.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;259.0417&#34; y=&#34;-237.4&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Enlightend (Windows)&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;276.331&#34; y=&#34;-223.4&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Child Partition 1&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;422,-192 422,-278 608,-278 608,-192 422,-192&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;425.5,-195.5 425.5,-274.5 604.5,-274.5 604.5,-195.5 425.5,-195.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;461.1483&#34; y=&#34;-237.4&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Enlightend (Linux)&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;468.331&#34; y=&#34;-223.4&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Child Partition 2&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;614,-192 614,-278 800,-278 800,-192 614,-192&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;617.5,-195.5 617.5,-274.5 796.5,-274.5 796.5,-195.5 617.5,-195.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;665.7889&#34; y=&#34;-237.4&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Unenlightened&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;660.331&#34; y=&#34;-223.4&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Child Partition 3&lt;/text&gt;
  &lt;polygon fill=&#34;#add8e6&#34; stroke=&#34;transparent&#34; points=&#34;11.5,-127.5 11.5,-187.5 804.5,-187.5 804.5,-127.5 11.5,-127.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-129 13,-186 803,-186 803,-129 13,-129&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;376.5112&#34; y=&#34;-154.3&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Hypervisor&lt;/text&gt;
  &lt;polygon fill=&#34;#c0c0c0&#34; stroke=&#34;transparent&#34; points=&#34;11.5,-84.5 11.5,-124.5 804.5,-124.5 804.5,-84.5 11.5,-84.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-86 13,-123 803,-123 803,-86 13,-86&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;259.3116&#34; y=&#34;-101.3&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Physical (Bare-Metal) Host&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;443.2542&#34; y=&#34;-101.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(Intel-VT)/(AMD-V)&lt;/text&gt;
  &lt;/g&gt;
  &lt;/g&gt;
  &lt;/svg&gt;

&lt;/center&gt;
&lt;/figure&gt;
&lt;br/&gt;

---

$$\def\sc#1{\dosc#1\csod} \def\dosc#1#2\csod{{\rm #1{\small #2}}}$$

&lt;figure style=&#34;font-size:18px;margin-left:-45px;margin-top:-120px;margin-bottom:-20px&#34;&gt;
&lt;center&gt;
  &lt;figcaption&gt;
  
  $$
  \sc{HYPER-V}\\
  \sc{HIGH-LEVEL\ ARCHITECTURE}
  $$
 
  &lt;/figcaption&gt;

  &lt;!-- width=&#34;865pt&#34; height=&#34;705pt&#34; --&gt;
  &lt;svg width=&#34;635pt&#34; height=&#34;&#34; viewBox=&#34;0.00 0.00 865.00 705.00&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;
  &lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 701)&#34;&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-246 13,-688 266,-688 266,-246 13,-246&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#da70d6&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;16.5,-249.5 16.5,-684.5 262.5,-684.5 262.5,-249.5 16.5,-249.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;100.0263&#34; y=&#34;-649.8&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;Root Partition&lt;/text&gt;
  &lt;polygon fill=&#34;#edf2f9&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;18.5,-589.5 18.5,-621.5 260.5,-621.5 260.5,-589.5 18.5,-589.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;19.5,-590.5 19.5,-620.5 259.5,-620.5 259.5,-590.5 19.5,-590.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;88.7654&#34; y=&#34;-601.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;User Applications&lt;/text&gt;
  &lt;polygon fill=&#34;#f7de9c&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;18.5,-539.5 18.5,-587.5 260.5,-587.5 260.5,-539.5 18.5,-539.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;19.5,-540.5 19.5,-586.5 259.5,-586.5 259.5,-540.5 19.5,-540.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;120.4565&#34; y=&#34;-559.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Kernel&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;18.5,-489.5 18.5,-537.5 260.5,-537.5 260.5,-489.5 18.5,-489.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;19.5,-490.5 19.5,-536.5 259.5,-536.5 259.5,-490.5 19.5,-490.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;117.3338&#34; y=&#34;-509.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VMBus&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;19.5,-252.5 19.5,-486.5 259.5,-486.5 259.5,-252.5 19.5,-252.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;22.5,-255.5 22.5,-483.5 256.5,-483.5 256.5,-255.5 22.5,-255.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;24.5,-459.5 24.5,-481.5 254.5,-481.5 254.5,-459.5 24.5,-459.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;83.3215&#34; y=&#34;-467.3&#34; font-family=&#34;Times,serif&#34; font-style=&#34;italic&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Virtualization Stack&lt;/text&gt;
  &lt;polygon fill=&#34;#e48312&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;24.5,-410.5 24.5,-457.5 254.5,-457.5 254.5,-410.5 24.5,-410.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;24.5,-410.5 24.5,-457.5 254.5,-457.5 254.5,-410.5 24.5,-410.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;67.1935&#34; y=&#34;-438.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VM Management Service&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;113.4502&#34; y=&#34;-421.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(VMMS)&lt;/text&gt;
  &lt;polygon fill=&#34;#e48312&#34; stroke=&#34;transparent&#34; points=&#34;24.5,-361.5 24.5,-408.5 254.5,-408.5 254.5,-361.5 24.5,-361.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;24.5,-361.5 24.5,-408.5 254.5,-408.5 254.5,-361.5 24.5,-361.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;76.1388&#34; y=&#34;-389.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VM Worker Processes&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;110.3429&#34; y=&#34;-372.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(VMWPs)&lt;/text&gt;
  &lt;polygon fill=&#34;#e48312&#34; stroke=&#34;transparent&#34; points=&#34;24.5,-313.5 24.5,-359.5 254.5,-359.5 254.5,-313.5 24.5,-313.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;24.5,-313.5 24.5,-359.5 254.5,-359.5 254.5,-313.5 24.5,-313.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;40.7699&#34; y=&#34;-340.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Virtualization Infrastructure Driver&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;122.4025&#34; y=&#34;-323.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(VID)&lt;/text&gt;
  &lt;polygon fill=&#34;#e48312&#34; stroke=&#34;transparent&#34; points=&#34;24.5,-265.5 24.5,-311.5 254.5,-311.5 254.5,-265.5 24.5,-265.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;24.5,-265.5 24.5,-311.5 254.5,-311.5 254.5,-265.5 24.5,-265.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;49.3071&#34; y=&#34;-292.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Virtualization Service Providers&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;119.2812&#34; y=&#34;-275.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(VSPs)&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;272,-246 272,-688 458,-688 458,-246 272,-246&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;275.5,-249.5 275.5,-684.5 454.5,-684.5 454.5,-249.5 275.5,-249.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;301.0417&#34; y=&#34;-654.9&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Enlightend (Windows)&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;318.331&#34; y=&#34;-640.9&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Child Partition 1&lt;/text&gt;
  &lt;polygon fill=&#34;#edf2f9&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;277.5,-590.5 277.5,-620.5 452.5,-620.5 452.5,-590.5 277.5,-590.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;278.5,-591.5 278.5,-619.5 451.5,-619.5 451.5,-591.5 278.5,-591.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;314.2654&#34; y=&#34;-601.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;User Applications&lt;/text&gt;
  &lt;polygon fill=&#34;#f7de9c&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;277.5,-538.5 277.5,-588.5 452.5,-588.5 452.5,-538.5 277.5,-538.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;278.5,-539.5 278.5,-587.5 451.5,-587.5 451.5,-539.5 278.5,-539.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;345.9565&#34; y=&#34;-559.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Kernel&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;277.5,-486.5 277.5,-536.5 452.5,-536.5 452.5,-486.5 277.5,-486.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;278.5,-487.5 278.5,-535.5 451.5,-535.5 451.5,-487.5 278.5,-487.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;342.8338&#34; y=&#34;-507.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VMBus&lt;/text&gt;
  &lt;polygon fill=&#34;#cccccc&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;277.5,-454.5 277.5,-484.5 452.5,-484.5 452.5,-454.5 277.5,-454.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;278.5,-455.5 278.5,-483.5 451.5,-483.5 451.5,-455.5 278.5,-455.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;338.3699&#34; y=&#34;-465.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;I/O Stack&lt;/text&gt;
  &lt;polygon fill=&#34;#cccccc&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;277.5,-422.5 277.5,-452.5 452.5,-452.5 452.5,-422.5 277.5,-422.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;278.5,-423.5 278.5,-451.5 451.5,-451.5 451.5,-423.5 278.5,-423.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;344.0112&#34; y=&#34;-433.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Drivers&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;277.5,-328.5 277.5,-420.5 452.5,-420.5 452.5,-328.5 277.5,-328.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;278.5,-329.5 278.5,-419.5 451.5,-419.5 451.5,-329.5 278.5,-329.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;303.3839&#34; y=&#34;-403.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Virtualization Service&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;297.3478&#34; y=&#34;-387.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Consumers / Integration&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;329.6115&#34; y=&#34;-370.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Components&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;333.115&#34; y=&#34;-336.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(VSPs/ICs)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;277.5,-251.5 277.5,-326.5 452.5,-326.5 452.5,-251.5 277.5,-251.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;278.5,-252.5 278.5,-325.5 451.5,-325.5 451.5,-252.5 278.5,-252.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;304.933&#34; y=&#34;-309.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Windows Hypervisor&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;317.3951&#34; y=&#34;-293.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Interface Library&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;339.7335&#34; y=&#34;-259.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(WinHv)&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;464,-246 464,-688 650,-688 650,-246 464,-246&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;467.5,-249.5 467.5,-684.5 646.5,-684.5 646.5,-249.5 467.5,-249.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;503.1483&#34; y=&#34;-654.9&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Enlightend (Linux)&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;510.331&#34; y=&#34;-640.9&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Child Partition 2&lt;/text&gt;
  &lt;polygon fill=&#34;#edf2f9&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;469.5,-590.5 469.5,-620.5 644.5,-620.5 644.5,-590.5 469.5,-590.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;470.5,-591.5 470.5,-619.5 643.5,-619.5 643.5,-591.5 470.5,-591.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;506.2654&#34; y=&#34;-601.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;User Applications&lt;/text&gt;
  &lt;polygon fill=&#34;#f7de9c&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;469.5,-538.5 469.5,-588.5 644.5,-588.5 644.5,-538.5 469.5,-538.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;470.5,-539.5 470.5,-587.5 643.5,-587.5 643.5,-539.5 470.5,-539.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;537.9565&#34; y=&#34;-559.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Kernel&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;469.5,-486.5 469.5,-536.5 644.5,-536.5 644.5,-486.5 469.5,-486.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;470.5,-487.5 470.5,-535.5 643.5,-535.5 643.5,-487.5 470.5,-487.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;534.8338&#34; y=&#34;-507.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VMBus&lt;/text&gt;
  &lt;polygon fill=&#34;#cccccc&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;469.5,-454.5 469.5,-484.5 644.5,-484.5 644.5,-454.5 469.5,-454.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;470.5,-455.5 470.5,-483.5 643.5,-483.5 643.5,-455.5 470.5,-455.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;530.3699&#34; y=&#34;-465.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;I/O Stack&lt;/text&gt;
  &lt;polygon fill=&#34;#cccccc&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;469.5,-422.5 469.5,-452.5 644.5,-452.5 644.5,-422.5 469.5,-422.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;470.5,-423.5 470.5,-451.5 643.5,-451.5 643.5,-423.5 470.5,-423.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;536.0112&#34; y=&#34;-433.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Drivers&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;469.5,-328.5 469.5,-420.5 644.5,-420.5 644.5,-328.5 469.5,-328.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;470.5,-329.5 470.5,-419.5 643.5,-419.5 643.5,-329.5 470.5,-329.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;476.9123&#34; y=&#34;-403.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Linux Virtualization Service&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;489.3478&#34; y=&#34;-387.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Consumers / Integration&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;521.6115&#34; y=&#34;-370.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Components&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;506.6434&#34; y=&#34;-336.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(Linux VSPs/ICs)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;469.5,-251.5 469.5,-326.5 644.5,-326.5 644.5,-251.5 469.5,-251.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;470.5,-252.5 470.5,-325.5 643.5,-325.5 643.5,-252.5 470.5,-252.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;507.0396&#34; y=&#34;-309.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Linux Hypervisor&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;509.3951&#34; y=&#34;-293.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Interface Library&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;527.0645&#34; y=&#34;-259.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(LinuxHv)&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;656,-246 656,-688 842,-688 842,-246 656,-246&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;659.5,-249.5 659.5,-684.5 838.5,-684.5 838.5,-249.5 659.5,-249.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;707.7889&#34; y=&#34;-655.4&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Unenlightened&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;702.331&#34; y=&#34;-641.4&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Child Partition 3&lt;/text&gt;
  &lt;polygon fill=&#34;#edf2f9&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;661.5,-588.5 661.5,-621.5 836.5,-621.5 836.5,-588.5 661.5,-588.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;662.5,-589.5 662.5,-620.5 835.5,-620.5 835.5,-589.5 662.5,-589.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;698.2654&#34; y=&#34;-600.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;User Applications&lt;/text&gt;
  &lt;polygon fill=&#34;#f7de9c&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;661.5,-537.5 661.5,-586.5 836.5,-586.5 836.5,-537.5 661.5,-537.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;662.5,-538.5 662.5,-585.5 835.5,-585.5 835.5,-538.5 662.5,-538.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;729.9565&#34; y=&#34;-557.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Kernel&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;661.5,-486.5 661.5,-535.5 836.5,-535.5 836.5,-486.5 661.5,-486.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;662.5,-487.5 662.5,-534.5 835.5,-534.5 835.5,-487.5 662.5,-487.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;726.8338&#34; y=&#34;-506.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VMBus&lt;/text&gt;
  &lt;polygon fill=&#34;#add8e6&#34; stroke=&#34;transparent&#34; points=&#34;11.5,-147.5 11.5,-241.5 846.5,-241.5 846.5,-147.5 11.5,-147.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-149 13,-240 845,-240 845,-149 13,-149&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;397.5112&#34; y=&#34;-220.9&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Hypervisor&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;18.5,-154.5 18.5,-212.5 127.5,-212.5 127.5,-154.5 18.5,-154.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;19.5,-155.5 19.5,-211.5 126.5,-211.5 126.5,-155.5 19.5,-155.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;42.6816&#34; y=&#34;-179.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Hypercalls&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;129.5,-154.5 129.5,-212.5 324.5,-212.5 324.5,-154.5 129.5,-154.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;130.5,-155.5 130.5,-211.5 323.5,-211.5 323.5,-155.5 130.5,-155.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;153.5175&#34; y=&#34;-187.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Memory Service Routines&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;204.8352&#34; y=&#34;-170.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(MSRs)&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;326.5,-154.5 326.5,-212.5 517.5,-212.5 517.5,-154.5 326.5,-154.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;327.5,-155.5 327.5,-211.5 516.5,-211.5 516.5,-155.5 327.5,-155.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;350.6651&#34; y=&#34;-195.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Advanced Programmable&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;365.2391&#34; y=&#34;-179.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; Interrupt Controller&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;401.3962&#34; y=&#34;-162.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(APIC)&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;519.5,-154.5 519.5,-212.5 623.5,-212.5 623.5,-154.5 519.5,-154.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;520.5,-155.5 520.5,-211.5 622.5,-211.5 622.5,-155.5 520.5,-155.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;543.5112&#34; y=&#34;-179.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Scheduler&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;625.5,-154.5 625.5,-212.5 740.5,-212.5 740.5,-154.5 625.5,-154.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;626.5,-155.5 626.5,-211.5 739.5,-211.5 739.5,-155.5 626.5,-155.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;660.0645&#34; y=&#34;-187.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Address&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;649.5652&#34; y=&#34;-170.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Managment&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;742.5,-154.5 742.5,-212.5 839.5,-212.5 839.5,-154.5 742.5,-154.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;743.5,-155.5 743.5,-211.5 838.5,-211.5 838.5,-155.5 743.5,-155.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;766.8899&#34; y=&#34;-187.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Partition&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;766.1255&#34; y=&#34;-170.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Manager&lt;/text&gt;
  &lt;polygon fill=&#34;#c0c0c0&#34; stroke=&#34;transparent&#34; points=&#34;11.5,-84.5 11.5,-144.5 846.5,-144.5 846.5,-84.5 11.5,-84.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-86 13,-143 845,-143 845,-86 13,-86&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;280.3116&#34; y=&#34;-123.9&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Physical (Bare-Metal) Host&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;460.2542&#34; y=&#34;-123.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;( Intel-VT / AMD-V )&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;18.5,-91.5 18.5,-115.5 181.5,-115.5 181.5,-91.5 18.5,-91.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;19.5,-92.5 19.5,-114.5 180.5,-114.5 180.5,-92.5 19.5,-92.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;60.1546&#34; y=&#34;-98.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Network Card&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;183.5,-91.5 183.5,-115.5 299.5,-115.5 299.5,-91.5 183.5,-91.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;184.5,-92.5 184.5,-114.5 298.5,-114.5 298.5,-92.5 184.5,-92.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;225.1648&#34; y=&#34;-98.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;CPUs&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;301.5,-91.5 301.5,-115.5 430.5,-115.5 430.5,-91.5 301.5,-91.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;302.5,-92.5 302.5,-114.5 429.5,-114.5 429.5,-92.5 302.5,-92.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;343.4572&#34; y=&#34;-98.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Devices&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;432.5,-91.5 432.5,-115.5 526.5,-115.5 526.5,-91.5 432.5,-91.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;433.5,-92.5 433.5,-114.5 525.5,-114.5 525.5,-92.5 433.5,-92.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;474.25&#34; y=&#34;-98.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;528.5,-91.5 528.5,-115.5 711.5,-115.5 711.5,-91.5 528.5,-91.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;529.5,-92.5 529.5,-114.5 710.5,-114.5 710.5,-92.5 529.5,-92.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;570.426&#34; y=&#34;-98.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Physical Memory&lt;/text&gt;
  &lt;polygon fill=&#34;#e7e7e8&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;713.5,-91.5 713.5,-115.5 839.5,-115.5 839.5,-91.5 713.5,-91.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;714.5,-92.5 714.5,-114.5 838.5,-114.5 838.5,-92.5 714.5,-92.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;755.1185&#34; y=&#34;-98.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Storage&lt;/text&gt;
  &lt;/g&gt;
  &lt;/g&gt;
  &lt;/svg&gt;
&lt;/center&gt;
&lt;/figure&gt;

---

$$\def\sc#1{\dosc#1\csod} \def\dosc#1#2\csod{{\rm #1{\small #2}}}$$

&lt;figure style=&#34;font-size:18px;margin:-50px;margin-top:-120px;height:100%&#34;&gt;
&lt;center&gt;
  &lt;figcaption style=&#34;margin-bottom:-20px&#34;&gt;
  
  $$
  \Large\sc{KERNEL\ V.}\ \sc{USERSPACE}\\
  ( \sc{ROOT\ V.\ CHILD\ PART} )
  $$
  &lt;/figcaption&gt;

  &lt;!-- width=&#34;1085pt&#34; height=&#34;861pt&#34; --&gt;
  &lt;svg width=&#34;625pt&#34; height=&#34;&#34; viewBox=&#34;0.00 0.00 1085.00 861.00&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;
  &lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 857)&#34;&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;13,-44 13,-844 536,-844 536,-44 13,-44&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#da70d6&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;16.5,-47.5 16.5,-840.5 532.5,-840.5 532.5,-47.5 16.5,-47.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;235.0263&#34; y=&#34;-810.3&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Root Partition&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;19.5,-510.5 19.5,-785.5 529.5,-785.5 529.5,-510.5 19.5,-510.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#edf2f9&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;22.5,-513.5 22.5,-782.5 526.5,-782.5 526.5,-513.5 22.5,-513.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;242.6269&#34; y=&#34;-759.8&#34; font-family=&#34;Times,serif&#34; font-style=&#34;italic&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;User-Mode&lt;/text&gt;
  &lt;polygon fill=&#34;#a9b1cf&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;24.5,-683.5 24.5,-743.5 524.5,-743.5 524.5,-683.5 24.5,-683.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;25.5,-684.5 25.5,-742.5 523.5,-742.5 523.5,-684.5 25.5,-684.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;223.7654&#34; y=&#34;-709.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;User Applications&lt;/text&gt;
  &lt;polygon fill=&#34;#aaadbc&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;24.5,-641.5 24.5,-681.5 524.5,-681.5 524.5,-641.5 24.5,-641.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;25.5,-642.5 25.5,-680.5 523.5,-680.5 523.5,-642.5 25.5,-642.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;241.6462&#34; y=&#34;-657.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VMMS.exe&lt;/text&gt;
  &lt;polygon fill=&#34;#aaadbc&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;24.5,-599.5 24.5,-639.5 524.5,-639.5 524.5,-599.5 24.5,-599.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;25.5,-600.5 25.5,-638.5 523.5,-638.5 523.5,-600.5 25.5,-600.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;226.0936&#34; y=&#34;-615.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VMCompute.exe&lt;/text&gt;
  &lt;polygon fill=&#34;#aaadbc&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;24.5,-557.5 24.5,-597.5 524.5,-597.5 524.5,-557.5 24.5,-557.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;25.5,-558.5 25.5,-596.5 523.5,-596.5 523.5,-558.5 25.5,-558.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;236.9849&#34; y=&#34;-573.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VMMem.exe&lt;/text&gt;
  &lt;polygon fill=&#34;#aaadbc&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;24.5,-515.5 24.5,-555.5 524.5,-555.5 524.5,-515.5 24.5,-515.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;25.5,-516.5 25.5,-554.5 523.5,-554.5 523.5,-516.5 25.5,-516.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;241.2612&#34; y=&#34;-531.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VMWP.exe&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;19.5,-50.5 19.5,-506.5 529.5,-506.5 529.5,-50.5 19.5,-50.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#f7de9c&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;22.5,-53.5 22.5,-503.5 526.5,-503.5 526.5,-53.5 22.5,-53.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#f7de9c&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;26.5,-464.5 26.5,-499.5 522.5,-499.5 522.5,-464.5 26.5,-464.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;236.7966&#34; y=&#34;-478.8&#34; font-family=&#34;Times,serif&#34; font-style=&#34;italic&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Kernel-Mode&lt;/text&gt;
  &lt;polygon fill=&#34;#eeb470&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;26.5,-400.5 26.5,-460.5 522.5,-460.5 522.5,-400.5 26.5,-400.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;26.5,-400.5 26.5,-460.5 522.5,-460.5 522.5,-400.5 26.5,-400.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;229.791&#34; y=&#34;-426.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Host OS Kernel&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;26.5,-351.5 26.5,-396.5 522.5,-396.5 522.5,-351.5 26.5,-351.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;26.5,-351.5 26.5,-396.5 522.5,-396.5 522.5,-351.5 26.5,-351.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;233.8643&#34; y=&#34;-378.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VmSwitch.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;185.2941&#34; y=&#34;-361.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(Para-Virtualizaed Networking)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;26.5,-302.5 26.5,-347.5 522.5,-347.5 522.5,-302.5 26.5,-302.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;26.5,-302.5 26.5,-347.5 522.5,-347.5 522.5,-302.5 26.5,-302.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;240.8629&#34; y=&#34;-329.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;StorVsp.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;200.4547&#34; y=&#34;-312.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(Para-Virtualized Storage)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;26.5,-253.5 26.5,-298.5 522.5,-298.5 522.5,-253.5 26.5,-253.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;26.5,-253.5 26.5,-298.5 522.5,-298.5 522.5,-253.5 26.5,-253.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;238.5312&#34; y=&#34;-280.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;WinHvR.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;190.9417&#34; y=&#34;-263.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(Kernel Hypervisor Interface)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;26.5,-204.5 26.5,-249.5 522.5,-249.5 522.5,-204.5 26.5,-204.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;26.5,-204.5 26.5,-249.5 522.5,-249.5 522.5,-204.5 26.5,-204.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;240.0859&#34; y=&#34;-231.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;vPciVsp.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;210.9463&#34; y=&#34;-214.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(Para-Virtualized PCI)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;26.5,-155.5 26.5,-200.5 522.5,-200.5 522.5,-155.5 26.5,-155.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;26.5,-155.5 26.5,-200.5 522.5,-200.5 522.5,-155.5 26.5,-155.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;237.7479&#34; y=&#34;-182.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VmBusR.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;247.6732&#34; y=&#34;-165.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(VMBus)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;26.5,-106.5 26.5,-151.5 522.5,-151.5 522.5,-106.5 26.5,-106.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;26.5,-106.5 26.5,-151.5 522.5,-151.5 522.5,-106.5 26.5,-106.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;228.419&#34; y=&#34;-133.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VmBKmclR.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;166.6188&#34; y=&#34;-116.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(VMBus Kernel-Mode Client Library)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;26.5,-57.5 26.5,-102.5 522.5,-102.5 522.5,-57.5 26.5,-57.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;26.5,-57.5 26.5,-102.5 522.5,-102.5 522.5,-57.5 26.5,-57.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;253.3068&#34; y=&#34;-84.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Vid.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;171.1093&#34; y=&#34;-67.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(Virtualization Infrastructure Driver)&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;3&#34; points=&#34;542,-44 542,-844 1065,-844 1065,-44 542,-44&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#a52a2a&#34; stroke=&#34;transparent&#34; stroke-width=&#34;3&#34; points=&#34;545.5,-47.5 545.5,-840.5 1061.5,-840.5 1061.5,-47.5 545.5,-47.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;739.3422&#34; y=&#34;-810.3&#34; font-family=&#34;Times,serif&#34; font-weight=&#34;bold&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Child (Guest) Partition&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;548.5,-514.5 548.5,-785.5 1058.5,-785.5 1058.5,-514.5 548.5,-514.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#edf2f9&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;551.5,-517.5 551.5,-782.5 1055.5,-782.5 1055.5,-517.5 551.5,-517.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;771.6269&#34; y=&#34;-758.8&#34; font-family=&#34;Times,serif&#34; font-style=&#34;italic&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;User-Mode&lt;/text&gt;
  &lt;polygon fill=&#34;#a9b1cf&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;553.5,-519.5 553.5,-741.5 1053.5,-741.5 1053.5,-519.5 553.5,-519.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;554.5,-520.5 554.5,-740.5 1052.5,-740.5 1052.5,-520.5 554.5,-520.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;752.7654&#34; y=&#34;-626.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;User Applications&lt;/text&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; points=&#34;548.5,-50.5 548.5,-510.5 1058.5,-510.5 1058.5,-50.5 548.5,-50.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#f7de9c&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;551.5,-53.5 551.5,-507.5 1055.5,-507.5 1055.5,-53.5 551.5,-53.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;#f7de9c&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;555.5,-467.5 555.5,-503.5 1051.5,-503.5 1051.5,-467.5 555.5,-467.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;765.7966&#34; y=&#34;-482.3&#34; font-family=&#34;Times,serif&#34; font-style=&#34;italic&#34; text-decoration=&#34;underline&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Kernel-Mode&lt;/text&gt;
  &lt;polygon fill=&#34;#eeb470&#34; stroke=&#34;transparent&#34; stroke-width=&#34;2&#34; points=&#34;555.5,-402.5 555.5,-463.5 1051.5,-463.5 1051.5,-402.5 555.5,-402.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;555.5,-402.5 555.5,-463.5 1051.5,-463.5 1051.5,-402.5 555.5,-402.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;755.6837&#34; y=&#34;-428.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest OS Kernel&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;555.5,-352.5 555.5,-398.5 1051.5,-398.5 1051.5,-352.5 555.5,-352.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;555.5,-352.5 555.5,-398.5 1051.5,-398.5 1051.5,-352.5 555.5,-352.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;769.0866&#34; y=&#34;-379.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;NetVSC.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;714.2941&#34; y=&#34;-362.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(Para-Virtualizaed Networking)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;555.5,-302.5 555.5,-348.5 1051.5,-348.5 1051.5,-302.5 555.5,-302.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;555.5,-302.5 555.5,-348.5 1051.5,-348.5 1051.5,-302.5 555.5,-302.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;767.5256&#34; y=&#34;-329.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;StorVSC.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;729.4547&#34; y=&#34;-312.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(Para-Virtualized Storage)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;555.5,-253.5 555.5,-298.5 1051.5,-298.5 1051.5,-253.5 555.5,-253.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;555.5,-253.5 555.5,-298.5 1051.5,-298.5 1051.5,-253.5 555.5,-253.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;770.6462&#34; y=&#34;-280.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;WinHV.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;719.9417&#34; y=&#34;-263.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(Kernel Hypervisor Interface)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;555.5,-204.5 555.5,-249.5 1051.5,-249.5 1051.5,-204.5 555.5,-204.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;555.5,-204.5 555.5,-249.5 1051.5,-249.5 1051.5,-204.5 555.5,-204.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;778.4155&#34; y=&#34;-231.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;vPCI.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;739.9463&#34; y=&#34;-214.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(Para-Virtualized PCI)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;555.5,-155.5 555.5,-200.5 1051.5,-200.5 1051.5,-155.5 555.5,-155.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;555.5,-155.5 555.5,-200.5 1051.5,-200.5 1051.5,-155.5 555.5,-155.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;770.6392&#34; y=&#34;-182.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VMBus.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;776.6732&#34; y=&#34;-165.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(VMBus)&lt;/text&gt;
  &lt;polygon fill=&#34;#fed15d&#34; stroke=&#34;transparent&#34; points=&#34;555.5,-106.5 555.5,-151.5 1051.5,-151.5 1051.5,-106.5 555.5,-106.5&#34;&gt;&lt;/polygon&gt;
  &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;555.5,-106.5 555.5,-151.5 1051.5,-151.5 1051.5,-106.5 555.5,-106.5&#34;&gt;&lt;/polygon&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;756.6413&#34; y=&#34;-133.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;VMBKMCL.sys&lt;/text&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;695.6188&#34; y=&#34;-116.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;(VMBus Kernel-Mode Client Library)&lt;/text&gt;
  &lt;/g&gt;
  &lt;/g&gt;
  &lt;/svg&gt;
&lt;/center&gt;
&lt;/figure&gt;


---

## Hyper-V: Internals

- Deeper Architecture
- Interactions between components
- Communication Channels
  - VMBus
  - Hypercalls

---

### Communication Channels: VMBus

$$\def\sc#1{\dosc#1\csod} \def\dosc#1#2\csod{{\rm #1{\small #2}}}$$

&lt;figure&gt;
&lt;center&gt;
  &lt;figcaption style=&#34;font-size:18px&#34;&gt;
  
  $$
  \sc{VM}\sc{Bus\ provides\ an\ IPC\ channel\ between}\\
  \sc{Host\ and\ Guest\ -\ Implemented\ as\ a\ shared\ ring\ buffer}
  $$
 
  &lt;/figcaption&gt;
  
  &lt;!-- width=&#34;512pt&#34; height=&#34;307pt&#34; --&gt;
  &lt;svg width=&#34;512pt&#34; height=&#34;307pt&#34; viewBox=&#34;0.00 0.00 512.00 307.00&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34;&gt;
  &lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 303)&#34;&gt;
  &lt;text text-anchor=&#34;start&#34; x=&#34;351.1263&#34; y=&#34;-6.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; &lt;/text&gt;
  &lt;!-- host_rb --&gt;
  &lt;g id=&#34;node1&#34; class=&#34;node&#34;&gt;
  &lt;title&gt;host_rb&lt;/title&gt;
  &lt;path fill=&#34;#0078d7&#34; stroke=&#34;#000000&#34; d=&#34;M12,-50.5C12,-50.5 132,-50.5 132,-50.5 138,-50.5 144,-56.5 144,-62.5 144,-62.5 144,-286.5 144,-286.5 144,-292.5 138,-298.5 132,-298.5 132,-298.5 12,-298.5 12,-298.5 6,-298.5 0,-292.5 0,-286.5 0,-286.5 0,-62.5 0,-62.5 0,-56.5 6,-50.5 12,-50.5&#34;&gt;&lt;/path&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;72&#34; y=&#34;-281.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Host Ring Buffer&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;0,-273.7 144,-273.7 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;72&#34; y=&#34;-257.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;0,-248.9 144,-248.9 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;72&#34; y=&#34;-232.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;0,-224.1 144,-224.1 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;72&#34; y=&#34;-207.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;0,-199.3 144,-199.3 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;72&#34; y=&#34;-182.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;0,-174.5 144,-174.5 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;72&#34; y=&#34;-157.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;0,-149.7 144,-149.7 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;72&#34; y=&#34;-133.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;0,-124.9 144,-124.9 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;72&#34; y=&#34;-108.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;0,-100.1 144,-100.1 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;72&#34; y=&#34;-83.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;0,-75.3 144,-75.3 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;72&#34; y=&#34;-58.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;/g&gt;
  &lt;!-- sys_mem --&gt;
  &lt;g id=&#34;node3&#34; class=&#34;node&#34;&gt;
  &lt;title&gt;sys_mem&lt;/title&gt;
  &lt;path fill=&#34;#add8e6&#34; stroke=&#34;#000000&#34; d=&#34;M192,-50.5C192,-50.5 312,-50.5 312,-50.5 318,-50.5 324,-56.5 324,-62.5 324,-62.5 324,-286.5 324,-286.5 324,-292.5 318,-298.5 312,-298.5 312,-298.5 192,-298.5 192,-298.5 186,-298.5 180,-292.5 180,-286.5 180,-286.5 180,-62.5 180,-62.5 180,-56.5 186,-50.5 192,-50.5&#34;&gt;&lt;/path&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;252&#34; y=&#34;-281.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;System Memory&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;180,-273.7 324,-273.7 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;252&#34; y=&#34;-257.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;180,-248.9 324,-248.9 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;252&#34; y=&#34;-232.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;0x01000&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;180,-224.1 324,-224.1 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;252&#34; y=&#34;-207.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;0x02000&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;180,-199.3 324,-199.3 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;252&#34; y=&#34;-182.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;0x03000&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;180,-174.5 324,-174.5 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;252&#34; y=&#34;-157.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;180,-149.7 324,-149.7 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;252&#34; y=&#34;-133.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;0x8f000&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;180,-124.9 324,-124.9 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;252&#34; y=&#34;-108.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;0x90000&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;180,-100.1 324,-100.1 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;252&#34; y=&#34;-83.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;0x91000&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;180,-75.3 324,-75.3 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;252&#34; y=&#34;-58.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;/g&gt;
  &lt;!-- host_rb-&gt;sys_mem --&gt;
  &lt;g id=&#34;edge1&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;host_rb:top-&gt;sys_mem:top&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; stroke-dasharray=&#34;5,2&#34; d=&#34;M144,-236.5C144,-236.5 180,-211.5 180,-211.5&#34;&gt;&lt;/path&gt;
  &lt;/g&gt;
  &lt;!-- host_rb-&gt;sys_mem --&gt;
  &lt;g id=&#34;edge2&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;host_rb:btm-&gt;sys_mem:btm&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; stroke-dasharray=&#34;5,2&#34; d=&#34;M144,-62.5C144,-62.5 180,-62.5 180,-62.5&#34;&gt;&lt;/path&gt;
  &lt;/g&gt;
  &lt;!-- guest_rb --&gt;
  &lt;g id=&#34;node2&#34; class=&#34;node&#34;&gt;
  &lt;title&gt;guest_rb&lt;/title&gt;
  &lt;path fill=&#34;#0078d7&#34; stroke=&#34;#000000&#34; d=&#34;M372,-50.5C372,-50.5 492,-50.5 492,-50.5 498,-50.5 504,-56.5 504,-62.5 504,-62.5 504,-286.5 504,-286.5 504,-292.5 498,-298.5 492,-298.5 492,-298.5 372,-298.5 372,-298.5 366,-298.5 360,-292.5 360,-286.5 360,-286.5 360,-62.5 360,-62.5 360,-56.5 366,-50.5 372,-50.5&#34;&gt;&lt;/path&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;432&#34; y=&#34;-281.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Guest Ring Buffer&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;360,-273.7 504,-273.7 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;432&#34; y=&#34;-257.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;360,-248.9 504,-248.9 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;432&#34; y=&#34;-232.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;360,-224.1 504,-224.1 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;432&#34; y=&#34;-207.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;360,-199.3 504,-199.3 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;432&#34; y=&#34;-182.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;360,-174.5 504,-174.5 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;432&#34; y=&#34;-157.9&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;360,-149.7 504,-149.7 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;432&#34; y=&#34;-133.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;360,-124.9 504,-124.9 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;432&#34; y=&#34;-108.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;360,-100.1 504,-100.1 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;432&#34; y=&#34;-83.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;360,-75.3 504,-75.3 &#34;&gt;&lt;/polyline&gt;
  &lt;text text-anchor=&#34;middle&#34; x=&#34;432&#34; y=&#34;-58.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;...&lt;/text&gt;
  &lt;/g&gt;
  &lt;!-- guest_rb-&gt;sys_mem --&gt;
  &lt;g id=&#34;edge3&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;guest_rb:top-&gt;sys_mem:mid&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; stroke-dasharray=&#34;5,2&#34; d=&#34;M360,-236.5C360,-236.5 324,-137.5 324,-137.5&#34;&gt;&lt;/path&gt;
  &lt;/g&gt;
  &lt;!-- guest_rb-&gt;sys_mem --&gt;
  &lt;g id=&#34;edge4&#34; class=&#34;edge&#34;&gt;
  &lt;title&gt;guest_rb:btm-&gt;sys_mem:btm&lt;/title&gt;
  &lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; stroke-width=&#34;2&#34; stroke-dasharray=&#34;5,2&#34; d=&#34;M360,-62.5C360,-62.5 324,-62.5 324,-62.5&#34;&gt;&lt;/path&gt;
  &lt;/g&gt;
  &lt;!-- sys_mem-&gt;host_rb --&gt;
  &lt;!-- sys_mem-&gt;guest_rb --&gt;
  &lt;/g&gt;
  &lt;/svg&gt;

&lt;/center&gt;&lt;/figure&gt;

---

### Communication Channels: Hypercalls

---

## Hyper-V: Exploitation
&lt;font style=&#34;font-size:48px&#34;&gt;&lt;u&gt;Hyper-V Attack Surface: Goal&lt;/u&gt;&lt;/font&gt;

$$\def\sc#1{\dosc#1\csod} \def\dosc#1#2\csod{{\rm #1{\small #2}}}$$
&lt;table style=&#34;margin-top:-80px;margin-bottom:-40px&#34; border=&#34;20&#34;&gt;
&lt;tr&gt;&lt;td&gt;

$$
\sc{Ring-\Gamma}\ \ \Longrightarrow\ \begin{cases}
        \sc{Ring\ \ -}\ \ 0  \quad &amp;\text{if} \,\ \Gamma \leq 3 \\
        \sc{Ring\ \ -}\ -1 \quad &amp;\text{if} \,\ \Gamma \equiv 0
     \end{cases}
$$

&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;br/&gt;

&lt;table style=&#34;font-size:32px;width:105%;&#34;&gt;
&lt;tr&gt;
&lt;td width=&#34;&#34;&gt;
&lt;center&gt;
Guest-to-Host (VMBus)
&lt;/center&gt;
&lt;/td&gt;&lt;td&gt;
&lt;center&gt;
Guest-to-Host (Hypercalls)
&lt;/center&gt;
&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td width=&#34;&#34;&gt;
&lt;center&gt;

&lt;i&gt;Target:&lt;/i&gt; Kernel or Userspace&lt;br/&gt;($\sc{Ring-0}$ or $\sc{Ring-3}$, respectively)
&lt;/center&gt;
&lt;/td&gt;

&lt;td&gt;
&lt;center&gt;

&lt;i&gt;Target:&lt;/i&gt; Hypervisor&lt;br/&gt;$(\sc{Ring--1})$ 
&lt;/center&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

---

## Helpful Resources

&lt;br/&gt;

- [_Starting Hyper-V Research_ $\tiny(MSFT\ authored)$][start-research]
- [_Hyper-V: Spec_ $\tiny(MSFT)$][spec]
- [_Hyper-V: Fuzzing_   $\tiny(MSFT\ authored)$][fuzzing]
- [_Hyper-V: Deep-dive_ $\tiny(MSFT\ authored)$][deepdive]
- [_Hyper-V: IPC Internals_ $\tiny(SYSCAN\ &#39;15)$][r0r1]
- [_Hardening Hyper-V_ $\tiny(BHUS\ &#39;18)$][hardening-hyper-v]

&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;

[start-research]: https://msrc-blog.microsoft.com/2018/12/10/first-steps-in-hyper-v-research/

[spec]: https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/reference/tlfs

[deepdive]: https://raw.githubusercontent.com/microsoft/MSRC-Security-Research/master/presentations/2018_08_BlackHatUSA/A%20Dive%20in%20to%20Hyper-V%20Architecture%20and%20Vulnerabilities.pdf

[r0r1]: https://raw.githubusercontent.com/tpn/pdfs/master/Ring%200%20to%20Ring-1%20Attacks%20-%20Hyper-V%20IPC%20Internals%20-%20Alex%20Ionescu%20(syscan2015).pdf

[fuzzing]: https://msrc-blog.microsoft.com/2019/01/28/fuzzing-para-virtualized-devices-in-hyper-v/

[hardening-hyper-v]: https://i.blackhat.com/us-18/Thu-August-9/us-18-Rabet-Hardening-Hyper-V-Through-Offensive-Security-Research.pdf


---

$\textit{fin}$</div>
            </div>

            <div id="meta" style="display: none;">{&#34;title&#34;:&#34;Hypervise Me!&#34;,&#34;author&#34;:&#34;bynx&#34;,&#34;tags&#34;:&#34;talks&#34;,&#34;last-modified&#34;:&#34;2021-10-25T00:00:00.000Z&#34;}</div>

            <div class="footer">
                <div class="unselectable hidden-print" style="color: #777; line-height: 22px;">
                    <small>
                        <span>
                            
                                <span class="ui-lastchangeuser" data-profile="bynx">&thinsp;<a class="ui-user-icon small" style="background-image: url(https://avatars.githubusercontent.com/u/3212079?s=96);" target="_blank"></a></span>
                            
                            &nbsp;<span class="text-uppercase ui-status-lastchange"></span>
                            <span class="ui-lastchange text-uppercase" data-createtime="Mon Oct 11 2021 23:40:24 GMT+0000 (Coordinated Universal Time)" data-updatetime="Tue Oct 26 2021 01:22:57 GMT+0000 (Coordinated Universal Time)"></span>
                        </span>
                        <span class="pull-right">
                            882 views
                            <a href="#" class="ui-edit" title="Edit this note">
                                <i class="fa fa-fw fa-pencil"></i>
                            </a>
                            <a href="#" class="ui-print" title="Print slide">
                                <i class="fa fa-fw fa-print"></i>
                            </a>
                        </span>
                        <br>
                        
                        
                    </small>
                </div>
                
            </div>
        </div>

        
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-60728495-1"></script>
<script nonce="9396641a-6eba-4437-8d28-56413fc42bdf">
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    let userid = (document.cookie.match('(^|; )userid=([^;]*)')||0)[2];
    gtag('config', 'UA-60728495-1', {'user_id': userid});
</script>
<script src="https://browser.sentry-cdn.com/5.15.5/bundle.min.js" crossorigin="anonymous"></script>
<script nonce="9396641a-6eba-4437-8d28-56413fc42bdf">Sentry.init({ dsn: 'https://73410f1915d84abc8b2dd1f1aabd1c82@sentry.hackmd.dev/4', environment: 'production', integrations: function (intrus) { return intrus.filter(function (itr) { return itr.name !== 'TryCatch' }) } });</script>


        
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLW9Z3"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


        <script src="https://hackmd.io/api/i18n.js"></script>
        
         <script src="https://assets.hackmd.io/build/font-vendor.5ba1bda23ba5a8acfb08.js" defer="defer"></script><script src="https://assets.hackmd.io/build/common-vendor.8c24b0f76939219a3997.js" defer="defer"></script><script src="https://assets.hackmd.io/build/slide-vendor.939c8992072deadd5b93.js" defer="defer"></script><script src="https://assets.hackmd.io/build/slide-common.9248c9f6b9ee9364e53e.js" defer="defer"></script><script src="https://assets.hackmd.io/build/slide.98362ebfb3b5e553b5a7.js" defer="defer"></script>
        
    </body>
</html>



